<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Sysctl  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Sysctl  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Sysctl 1.4.0 Docs
        </a>
         (100% documented)
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/sersoft-gmbh/swift-sysctl">
            <img class="header-icon" src="img/gh.png" alt="GitHub"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Sysctl Reference</a>
      <img class="carat" src="img/carat.png" alt=""/>
      Sysctl  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Bool.html">Bool</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/CInt.html">CInt</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/CLongLong.html">CLongLong</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Date.html">Date</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/clockinfo.html">clockinfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/loadavg.html">loadavg</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/timeval.html">timeval</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SysctlNamespace.html">SysctlNamespace</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SysctlValue.html">SysctlValue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SysctlValueRepresentable.html">SysctlValueRepresentable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/_SysctlNamespaceBase">_SysctlNamespaceBase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Hardware.html">Hardware</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Kernel.html">Kernel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Kernel/Hypervisor.html">– Hypervisor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MachineDependent.html">MachineDependent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MachineDependent/CPU.html">– CPU</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Networking.html">Networking</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Networking/IPv4.html">– IPv4</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Networking/IPv6.html">– IPv6</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/SysctlContainer.html">SysctlContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/SysctlNamedField.html">SysctlNamedField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/SysctlRootNamespace.html">SysctlRootNamespace</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/SystemControl.html">SystemControl</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:6Sysctl01_A13NamespaceBasea">_SysctlNamespaceBase</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='swift-sysctl' class='heading'>Swift Sysctl</h1>

<p><a href="https://github.com/sersoft-gmbh/swift-sysctl/releases/latest"><img src="https://img.shields.io/github/release/sersoft-gmbh/swift-sysctl.svg?style=flat" alt="GitHub release"></a>
<img src="https://github.com/sersoft-gmbh/swift-sysctl/workflows/Tests/badge.svg" alt="Tests">
<a href="https://www.codacy.com/gh/sersoft-gmbh/swift-sysctl/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=sersoft-gmbh/swift-sysctl&amp;utm_campaign=Badge_Grade"><img src="https://app.codacy.com/project/badge/Grade/061aa9fba7d548f9a9bab8e35800b47a" alt="Codacy Badge"></a>
<a href="https://codecov.io/gh/sersoft-gmbh/swift-sysctl"><img src="https://codecov.io/gh/sersoft-gmbh/swift-sysctl/branch/main/graph/badge.svg?token=XckcIyFIbQ" alt="codecov"></a>
<a href="https://sersoft-gmbh.github.io/swift-sysctl"><img src="https://raw.githubusercontent.com/sersoft-gmbh/swift-sysctl/gh-pages/badge.svg?sanitize=true" alt="jazzy"></a></p>

<p>A Swift interface for reading (and writing) <code>sysctl</code> values.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p>Add the following dependency to your <code>Package.swift</code>:</p>
<pre class="highlight swift"><code><span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/sersoft-gmbh/swift-sysctl.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"1.0.0"</span><span class="p">),</span>
</code></pre>

<p>Or add it via Xcode (as of Xcode 11).</p>
<h2 id='usage' class='heading'>Usage</h2>

<p>Using Swift Sysctl is really easy. You just create a <code><a href="Structs/SystemControl.html">SystemControl</a></code> instance and start accessing values. That&rsquo;s it:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">sysctl</span> <span class="o">=</span> <span class="kt">SystemControl</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">machine</span> <span class="o">=</span> <span class="n">sysctl</span><span class="o">.</span><span class="n">hardware</span><span class="o">.</span><span class="n">machine</span> <span class="c1">// String with the value of `hw.machine`.</span>
</code></pre>

<p>Swift Sysctl contains a few common values and will also grow over time.
If you find that you need a value that&rsquo;s not yet present, you can easily add them. Just read through the following sections:</p>
<h3 id='code-sysctlnamespace-code' class='heading'><code><a href="Protocols/SysctlNamespace.html">SysctlNamespace</a></code></h3>

<p>As you might now, <code>sysctl</code> addresses values using a name that has dots in it. Swift Sysctl calls the parts between these dots &ldquo;namespace&rdquo; and represents them in Swift <code>struct</code>s. So for example, there&rsquo;s <code><a href="Structs/Hardware.html">Hardware</a></code> representing the <code>hw</code> namespace in <code>sysctl</code>.
Each namespace has a parent. If the namespace is located at the root, use the <code><a href="Structs/SysctlRootNamespace.html">SysctlRootNamespace</a></code> as parent.</p>

<p>When implementing your own namespaces, simply conform them to <code><a href="Protocols/SysctlNamespace.html">SysctlNamespace</a></code>, define the parent and implement <code>static var namePart: String { /*...*/ }</code>, returning the name part of your namespace (e.g. <code>hw</code> for <code><a href="Structs/Hardware.html">Hardware</a></code>).</p>

<p>Here&rsquo;s an example for a new (imaginary) namespace that also has a child namespace:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Superpower</span><span class="p">:</span> <span class="kt">SysctlNamespace</span> <span class="p">{</span>
    <span class="kd">typealias</span> <span class="kt">ParentNamespace</span> <span class="o">=</span> <span class="kt">SysctlRootNamespace</span>

    <span class="kd">static</span> <span class="k">var</span> <span class="nv">namePart</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span> <span class="s">"spwr"</span> <span class="p">}</span>

    <span class="kd">struct</span> <span class="kt">Control</span><span class="p">:</span> <span class="kt">SysctlNamespace</span> <span class="p">{</span>
        <span class="kd">typealias</span> <span class="kt">ParentNamespace</span> <span class="o">=</span> <span class="kt">Superpower</span>

        <span class="kd">static</span> <span class="k">var</span> <span class="nv">namePart</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span> <span class="s">"ctrl"</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">control</span><span class="p">:</span> <span class="kt">Control</span> <span class="p">{</span> <span class="o">.</span><span class="nf">init</span><span class="p">()</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">SysctlRootNamespace</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">superpower</span><span class="p">:</span> <span class="kt">Superpower</span> <span class="p">{</span> <span class="o">.</span><span class="nf">init</span><span class="p">()</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h4 id='code-sysctlnamespace-field-code' class='heading'><code><a href="Protocols/SysctlNamespace.html#/s:6Sysctl0A9NamespacePAAE5Fielda">SysctlNamespace.Field</a></code></h4>

<p>To access a value from <code>sysctl</code>, there are (computed) properties on the namespaces. So for example for <code>hw.machine</code> there&rsquo;s a property <code>machine</code> on the <code><a href="Structs/Hardware.html">Hardware</a></code> namespace.
To access new values, simply declare a new (computed) property on the namespace the field is in (either in a namespace that you implemented on your own or by extending an existing one). The value type of these properties needs to be <code>Field&lt;T&gt;</code> where <code>T</code> is the type of value.
<code>Field</code> is a typealias for <code><a href="Structs/SysctlNamedField.html">SysctlNamedField</a></code> inside a namespace. A field contains the last name part of the value&rsquo;s name. Thus you simply return the name as string.
If the value is writable, you also provide a <code>nonmutating set</code> implementation, which can be left empty.</p>

<p>Continuing our example, here&rsquo;s how fields on <code>Superpower</code> would look like:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Superpower</span> <span class="p">{</span>
    <span class="c1">// The current magic level. Read-only.</span>
    <span class="c1">// The full name will be `spwr.curmaglvl`.</span>
    <span class="k">var</span> <span class="nv">currentMagicLevel</span><span class="p">:</span> <span class="kt">Field</span><span class="o">&lt;</span><span class="kt">CInt</span><span class="o">&gt;</span> <span class="p">{</span> <span class="s">"curmaglvl"</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">Superpower</span><span class="o">.</span><span class="kt">Control</span> <span class="p">{</span>
    <span class="c1">// Whether superpowers are enabled. This is writable.</span>
    <span class="c1">// The full name will be `spwr.ctrl.enabled`.</span>
    <span class="k">var</span> <span class="nv">isEnabled</span><span class="p">:</span> <span class="kt">Field</span><span class="o">&lt;</span><span class="kt">Bool</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span> <span class="s">"enabled"</span> <span class="p">}</span>
        <span class="k">nonmutating</span> <span class="k">set</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='code-sysctlvalue-code-and-code-sysctlvaluerepresentable-code' class='heading'><code><a href="Protocols/SysctlValue.html">SysctlValue</a></code> and <code><a href="Protocols/SysctlValueRepresentable.html">SysctlValueRepresentable</a></code></h3>

<p>For Swift Sysctl to know how to read (or write) a value into <code>sysctl</code>, it needs to conform to <code><a href="Protocols/SysctlValue.html">SysctlValue</a></code>. However, <code>sysctl</code> only supports very few value types, so it&rsquo;s very unlikely that you need to conform another type to it.</p>

<p>A bit more likely (but still not very likely) is that you want to have custom type that is represented by a value that already conforms to <code><a href="Protocols/SysctlValue.html">SysctlValue</a></code>. In this case, the <code><a href="Protocols/SysctlValueRepresentable.html">SysctlValueRepresentable</a></code> protocol is what your type needs to conform to. It behaves very similar to Swift&rsquo;s <code>RawRepresentable</code> protocol. You need to declare which underlying <code><a href="Protocols/SysctlValue.html">SysctlValue</a></code> type your type will be using and implement the read-only property <code>var syctlValue: SysctlValue { get }</code> in which you return the underlying <code><a href="Protocols/SysctlValue.html">SysctlValue</a></code> of your type. Then you ned to implement <code>init(sysctlValue:)</code> on your type. Swift Sysctl will pass the underlyling <code><a href="Protocols/SysctlValue.html">SysctlValue</a></code> to this initializer and you are left with initializing your type from it.
With these requirements fulfilled, Swift Sysctl will provide the implementation for <code><a href="Protocols/SysctlValue.html">SysctlValue</a></code> for you and you can read and write your type from/to <code>sysctl</code>.</p>

<p>Again continuing our example, here&rsquo;s how you would read a new type from <code>sysctl</code>:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">MagicSpellPower</span><span class="p">:</span> <span class="kt">SysctlValueRepresentable</span> <span class="p">{</span>
    <span class="kd">typealias</span> <span class="kt">SysctlValue</span> <span class="o">=</span> <span class="kt">CInt</span>

    <span class="k">case</span> <span class="nf">low</span><span class="p">(</span><span class="kt">Int</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">medium</span>
    <span class="k">case</span> <span class="nf">high</span><span class="p">(</span><span class="nv">unbeatable</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span>

    <span class="k">var</span> <span class="nv">sysctlValue</span><span class="p">:</span> <span class="kt">SysctlValue</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">low</span><span class="p">(</span><span class="k">let</span> <span class="nv">val</span><span class="p">):</span> <span class="k">return</span> <span class="nf">numericCast</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">medium</span><span class="p">:</span> <span class="k">return</span> <span class="mi">5</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">high</span><span class="p">(</span><span class="k">let</span> <span class="nv">unbeatable</span><span class="p">):</span> <span class="k">return</span> <span class="n">unbeatable</span> <span class="p">?</span> <span class="o">-</span><span class="mi">1</span> <span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">sysctlValue</span><span class="p">:</span> <span class="kt">SysctlValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">sysctlValue</span> <span class="p">{</span>
        <span class="k">case</span> <span class="mi">0</span><span class="o">..&lt;</span><span class="mi">5</span><span class="p">:</span> <span class="k">self</span> <span class="o">=</span> <span class="o">.</span><span class="nf">low</span><span class="p">(</span><span class="nf">numericCast</span><span class="p">(</span><span class="n">sysctlValue</span><span class="p">))</span>
        <span class="k">case</span> <span class="mi">5</span><span class="p">:</span> <span class="k">self</span> <span class="o">=</span> <span class="o">.</span><span class="n">medium</span>
        <span class="k">case</span> <span class="mi">10</span><span class="p">:</span> <span class="k">self</span> <span class="o">=</span> <span class="o">.</span><span class="nf">high</span><span class="p">(</span><span class="nv">unbeatable</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="k">self</span> <span class="o">=</span> <span class="o">.</span><span class="nf">high</span><span class="p">(</span><span class="nv">unbeatable</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
        <span class="k">default</span><span class="p">:</span> <span class="nf">fatalError</span><span class="p">(</span><span class="s">"Invalid value: </span><span class="se">\(</span><span class="n">sysctlValue</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='possible-features' class='heading'>Possible Features</h2>

<p>While not yet integrated, the following features might provide added value and could make it into Swift Sysctl in the future:</p>

<ul>
<li>Allow for checks whether certain values are available before accessing them.</li>
<li>Support for dynamic names in <code>sysctl</code> (e.g. names depending on the number of cpus or network interfaces).</li>
<li>Improved error handling. Right now Swift Sysctl crashes if <code>sysctl</code> fails.</li>
</ul>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>The API is documented using header doc. If you prefer to view the documentation as a webpage, there is an <a href="https://sersoft-gmbh.github.io/swift-sysctl">online version</a> available for you.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>If you find a bug / like to see a new feature in Swift Sysctl there are a few ways of helping out:</p>

<ul>
<li>If you can fix the bug / implement the feature yourself please do and open a PR.</li>
<li>If you know how to code (which you probably do), please add a (failing) test and open a PR. We&rsquo;ll try to get your test green ASAP.</li>
<li>If you can do neither, then open an issue. While this might be the easiest way, it will likely take the longest for the bug to be fixed / feature to be implemented.</li>
</ul>
<h2 id='license' class='heading'>License</h2>

<p>See <a href="./LICENSE">LICENSE</a> file.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2022 <a class="link" href="https://sersoft.de" target="_blank" rel="external noopener">ser.soft GmbH</a>. All rights reserved. (Last updated: 2022-03-17)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
